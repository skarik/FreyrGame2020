#begin
#Initialize

goto_if_flag
{
    target OnEnd
    flag IntroSequence
    compare <
    value 60
}

goto_if_flag
{
    target OnEnd
    flag NathanEvents
    compare !=
    value 0
}


spawnstate
{
    spawn_ifunique nathan
    position 669 454
}

ai
{
    target nathan
    style cts
    command teleport
    position 669 454
}


goto { target OnEnd }

#OnBegin


goto_if_flag
{
    target OnEnd
    flag IntroSequence
    compare <
    value 60
}

goto_if_flag
{
    target OnEnd
    flag NathanEvents
    compare !=
    value 0
}

goto_if_player
{
    target DialogueForCortez
    as Cortez
}

#DialogueForCortez

// spawn the characters needed
//Needs to be A common thing that happens with events like this. 
//Like a fade in and out, or a starwars wipe. So people know when 
// they enter one. 

//edit the Old script to retrigger the nathan setup. 



screen
{
    type fadein
    rgb 0 0 0
}

//Nathan TENT BK

lines
{
	target player
	1 Oops. Better not wake him...
	facing down
}
player { actions lock }

lines
{
	target nathan
	facing player
	1 Hm?
	2 $M He should learn to knock.
}

// slide in the portraits here:

screen { 


type ctsin; 

}


portrait
{	// Nathan portrait
	index 0
	action show
	position 1.0
	align right
	face left
	character nathan
	expression questioning
}
portrait
{	// Player portrait
	index 1
	action show
	position 0.0
	align left
	face right
	character player
	expression neutral
}

lines
{
	target nathan
	style portrait
	object 0
	1 Did you need something? 

}


lines
{
	target player
	style portrait
	object 1
	1 Me? Nah! I was just um...Coming in to take a nap. Still not not use to this weather.
}

lines
{
	target nathan
	style portrait
	object 0
	1 $MHe's lying. He wanted to see us.$$
	2 Ehm. I never really notice. 

}

lines
{
	target player
	style portrait
	object 1
	1 Right well, I can...$qI should go$$. You seem busy?
}

lines
{
	target nathan
	style portrait
	object 0
	1 $MTell him we want him to stay..$$
	2 $qYou can stay...$$ I don't mind. Really it's fine.

}





#OnEnd
#ended

